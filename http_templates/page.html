<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Chatbox</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<style type="text/css">
body { font-family: sans-serif; }
#messageinput, #sendbutton { box-sizing: border-box; width: 100%; border: 1px solid #eee; border-radius: 15px; height: 30px; padding-left: 10px; padding-right: 10px; margin: 0px; }
#messageinput { background-color: #fff; }
#sendbutton { background-color: #eee; }
.sendername a:link, .sendername a:visited, .editlink a:link, .editlink a:visited { text-decoration: none; color: black; }
.icon { max-height: 4em; }
</style>
<script type="text/javascript">
function fetched() {
  document.getElementById('messages').innerHTML = this.responseText;
  window.setTimeout('fetch()', 5000);
}

function fetch() {
  var req = new XMLHttpRequest();
  req.onload = fetched;
  req.open('GET', '/messages', true);
  req.send();
}
window.setTimeout('fetch()', 500);
window.setTimeout("document.getElementById('messageinput').focus()", 600);
</script>
</head>
<body>
<form action="/postmessage" method="POST">
<p><input type="text" name="message" id="messageinput" /></p>
<p><button type="submit" id="sendbutton">Send</button></p>
</form>
<div id="messages">
Fetching...
</div>
</body>
</html>
